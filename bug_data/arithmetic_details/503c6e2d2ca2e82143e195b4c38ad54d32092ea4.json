{"filename": "src/MarketManager.sol", "patch": "@@ -131,12 +131,16 @@ contract MarketManager is IMarketManager, Math {\n             return 0;\n         }\n \n-        uint256 share = wdiv(\n-            marketToFundsToLiquidity[marketId][fundId],\n-            marketLiquidity\n+        uint256 allFundDebtUint = uint256(abs(allFundDebt));\n+\n+        uint256 debtPerLiquidity = wdiv(allFundDebtUint, marketLiquidity);\n+\n+        uint256 thisFundDebt = wmul(\n+            debtPerLiquidity,\n+            marketToFundsToLiquidity[marketId][fundId]\n         );\n \n-        return int256(wmul(share, uint256(allFundDebt)));\n+        return -1 * int256(thisFundDebt);\n     }\n \n     function deposit(uint256 marketId, uint256 amount) external {\n@@ -184,4 +188,8 @@ contract MarketManager is IMarketManager, Math {\n \n         return false;\n     }\n+\n+    function abs(int256 x) private pure returns (int256) {\n+        return x >= 0 ? x : -x;\n+    }\n }", "project_link": "https://github.com/exp7l/resilience/commit/fbb9b999008a4adebcb68b4b414e4012148722c7", "solc_version": "0.4.18", "packages": "", "bug_version": {"raw_code": "", "flattened_code": "", "commit_id": "503c6e2d2ca2e82143e195b4c38ad54d32092ea4"}, "fixed_version": {"raw_code": "", "flattened_code": "", "commit_id": "fbb9b999008a4adebcb68b4b414e4012148722c7"}}