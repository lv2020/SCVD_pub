{"filename": "contracts/contracts/PawnBank.sol", "patch": "@@ -255,12 +255,13 @@ contract PawnBank {\n     // Prevent drawing from a loan with 0 available capital\n     require(loan.loanAmountDrawn < loan.loanAmount, \"Max draw capacity reached.\");\n \n-    // Draw the maximum available loan capital\n-    (bool sent, ) = payable(msg.sender).call{value: loan.loanAmount - loan.loanAmountDrawn}(\"\");\n-    require(sent == true, \"Failed to draw capital.\");\n-\n+    // Calculate capital to draw\n+    uint256 _availableCapital = loan.loanAmount - loan.loanAmountDrawn;\n     // Update drawn amount to current loan capacity\n     loan.loanAmountDrawn = loan.loanAmount;\n+    // Draw the maximum available loan capital\n+    (bool sent, ) = payable(msg.sender).call{value: _availableCapital}(\"\");\n+    require(sent == true, \"Failed to draw capital.\");\n \n     // Emit draw event\n     emit LoanDrawn(_loanId);", "project_link": "https://github.com/Anish-Agnihotri/pawnft/commit/bcf6e6a31b74e8bfa85726883bfeefbeb64e2cf7", "bug_version": {"raw_code": "", "flattened_code": "", "commit_id": "feb9dc75fa81da5eacd872383a6e8cb172fb0044"}, "fixed_version": {"raw_code": "", "flattened_code": "", "commit_id": "bcf6e6a31b74e8bfa85726883bfeefbeb64e2cf7"}}