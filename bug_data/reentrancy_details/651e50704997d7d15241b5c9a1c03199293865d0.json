{"filename": "contracts/vaults/yVault/yVault.sol", "patch": "@@ -142,7 +142,6 @@ contract YVault is ERC20, Ownable {\n     function deposit(uint256 _amount) public noContract(msg.sender) {\n         require(_amount > 0, \"INVALID_AMOUNT\");\n         uint256 balanceBefore = balance();\n-        token.safeTransferFrom(msg.sender, address(this), _amount);\n         uint256 supply = totalSupply();\n         uint256 shares;\n         if (supply == 0) {\n@@ -151,6 +150,7 @@ contract YVault is ERC20, Ownable {\n             //balanceBefore can't be 0 if totalSupply is > 0\n             shares = (_amount * supply) / balanceBefore;\n         }\n+        token.safeTransferFrom(msg.sender, address(this), _amount);\n         _mint(msg.sender, shares);\n \n         emit Deposit(msg.sender, _amount);", "project_link": "https://github.com/jpegd/core/commit/cb7af8ab3145cc01ea8718ab4d4cb2bb600657a6", "solc_version": "0.4.17", "packages": "", "bug_version": {"raw_code": "", "flattened_code": "", "commit_id": "651e50704997d7d15241b5c9a1c03199293865d0"}, "fixed_version": {"raw_code": "", "flattened_code": "", "commit_id": "cb7af8ab3145cc01ea8718ab4d4cb2bb600657a6"}}