{"filename": "contracts/Loans.sol", "patch": "@@ -301,6 +301,7 @@ contract Loans is DSMath {\n         require(sha256(abi.encodePacked(sec)) == sechs[loan].sechB1 || sha256(abi.encodePacked(sec)) == sechs[loan].sechC1);\n         require(now                             <= acex(loan));\n         require(bools[loan].sale                == false);\n+        bools[loan].off = true;\n         if (bools[loan].taken == false) {\n             tokes[loan].transfer(loans[loan].lend, loans[loan].prin);\n         } else if (bools[loan].taken == true) {\n@@ -311,7 +312,6 @@ contract Loans is DSMath {\n             }\n             tokes[loan].transfer(loans[loan].agent, lfee(loan));\n         }\n-        bools[loan].off = true;\n     }\n \n     function sechi(bytes32 loan, bytes32 usr) private view returns (bytes32 sech) { // Get Secret Hash for Sale Index", "project_link": "https://github.com/AtomicLoans/atomicloans-eth-contracts/commit/1e95441fd00d91b4593817e60e73d11c49e9794d", "bug_version": {"raw_code": "", "flattened_code": "", "commit_id": "655066b4ebedff2cd96ce5fb9c6880c05d9be49f"}, "fixed_version": {"raw_code": "", "flattened_code": "", "commit_id": "1e95441fd00d91b4593817e60e73d11c49e9794d"}}