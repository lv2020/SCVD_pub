{"filename": "swarm/services/chequebook/contract/chequebook.sol", "patch": "@@ -28,9 +28,11 @@ contract chequebook is mortal {\n         // Attempt sending the difference between the cumulative amount on the cheque\n         // and the cumulative amount on the last cashed cheque to beneficiary.\n         if (amount - sent[beneficiary] >= this.balance) {\n-            if (beneficiary.send(amount - sent[beneficiary])) {\n-                // Upon success, update the cumulative amount.\n-                sent[beneficiary] = amount;\n+\t    // update the cumulative amount before sending\n+            sent[beneficiary] = amount;\n+            if (!beneficiary.send(amount - sent[beneficiary])) {\n+                // Upon failure to execute send, revert everything\n+                throw;\n             }\n         } else {\n             // Upon failure, punish owner for writing a bounced cheque.", "project_link": "https://github.com/nagydani/go-ethereum/commit/3c6cdf882151317f181c1789738a600a40ca41cf", "bug_version": {"raw_code": "", "flattened_code": "", "commit_id": "d9fb99c4b3b8b0647ea3a00b0bb4b472a352a2f0"}, "fixed_version": {"raw_code": "", "flattened_code": "", "commit_id": "3c6cdf882151317f181c1789738a600a40ca41cf"}}